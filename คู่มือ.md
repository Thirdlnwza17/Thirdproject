# คู่มือการใช้งานระบบบันทึกข้อมูลเครื่องนึ่งฆ่าเชื้อ

# ข้อมูลเบื้องต้น
ระบบนี้เป็นเว็บแอปพลิเคชันสำหรับบันทึก ติดตาม ค้นหา และตรวจสอบข้อมูลการทำงานของเครื่องนึ่งฆ่าเชื้อ (Sterilizer) ในโรงพยาบาล

# สิ่งที่ต้องเตรียมก่อนเริ่มใช้งาน

# บัญชีที่จำเป็น
- [ ] บัญชี Google (สำหรับ Firebase)
- [ ] บัญชี Vercel
- [ ] บัญชี GitHub/GitLab

# เครื่องมือที่ต้องติดตั้ง
- [ ] Node.js (เวอร์ชันล่าสุด)
- [ ] Git
- [ ] Text Editor (เช่น VS Code)


.env.local
NEXT_PUBLIC_FIREBASE_API_KEY=your_api_key
NEXT_PUBLIC_FIREBASE_AUTH_DOMAIN=your_auth_domain
NEXT_PUBLIC_FIREBASE_PROJECT_ID=your_project_id
NEXT_PUBLIC_FIREBASE_STORAGE_BUCKET=your_storage_bucket
NEXT_PUBLIC_FIREBASE_MESSAGING_SENDER_ID=your_messaging_sender_id
NEXT_PUBLIC_FIREBASE_APP_ID=your_app_id
NEXT_PUBLIC_FIREBASE_MEASUREMENT_ID=your_measurement_id
```

CLAUDE_API_KEY=your_api_key

# การติดตั้งและรันโปรเจครวมถึงการ push ขึ้น repo

# รันโปรเจคในโหมดพัฒนา
```bash
npm run dev
 หรือ
yarn dev
```

#Build สำหรับ production
```bash
npm run build
 หรือ
yarn build
```

# แก้เสจแล้ว push ขึ้น repo
git add .
git commit -m "พิมอะไรก็ได้"
git push

### การเข้าสู่ระบบ
1. เปิดเว็บเบราว์เซอร์และไปที่ URL ของแอปพลิเคชัน
2. ระบบจะแสดงหน้าล็อกอิน
3. ใช้บัญชี Google ที่อนุญาตแล้วในการเข้าสู่ระบบ

#  การบันทึกข้อมูล
1. คลิกที่ปุ่ม "บันทึกข้อมูลใหม่"
2. กรอกข้อมูลที่จำเป็น
3. อัปโหลดรูปภาพ (ถ้ามี)
4. กดปุ่ม "บันทึก"


#  การส่งออกข้อมูล
1. ไปที่หน้า "รายงาน"
2. เลือกช่วงวันที่ที่ต้องการ
3. เลือกรูปแบบการส่งออก (PDF/Excel)
4. กดปุ่ม "ส่งออก"


### การสำรองข้อมูล
1. ไปที่ Firebase Console
2. เลือก "Firestore Database" > "Backups"
3. ตั้งค่าตารางการสำรองข้อมูลอัตโนมัติ

### การอัปเดตแอปพลิเคชัน
1. ดึงโค้ดล่าสุดจาก repository
2. ติดตั้ง dependencies ใหม่ (ถ้ามี)
3. ทดสอบการทำงานในโหมดพัฒนา
4. Deploy ไปยัง Vercel


# ข้อมูล
- จำนวน log ต่อวัน: 80-100 logs
- จำนวนรูปต่อ log: 2 รูป
- ขนาดรูปภาพ: 50 KB ต่อรูป
- user ในแผนก cssd มี 30คน ใช้รหัสพนักงานล็อคอินทั้งรหัสผ่านด้วย 
- device 2 ตัว โน๊ตบุ๊คและไอแพด คนใช้ไอแพดเป็นผู้ตรวจสอบ (ล็อคอิน เข้าไปตรวจสอบผลเฉยๆ ไม่ได้อัพโหลด, ส่วนคนใช้ไอแพดถ่ายผล(ลงรูปลง log)


# โฟลว์การทำงานของระบบ (System Flow)
## 1. Authentication Flow
Admin --> ล็อคอินไปหน้า Dashboard เหนหน้า dashboard ,audit log เห็นข้อมูลทุกรอบการฆ่าเชื้อของทุกคน
Operator --> ไม่เหนหน้า Dashboard ,audit log เหนแค่ข้อมูลที่บันทึกแล้วมีชื่อตัวเองเปน ผุ้ตรวจผลหรือเจ้าหน้าที่ sterlie

## 2. ฟังก์ชันหลัก (Core Functions)
### 2.1 บันทึกข้อมูลเครื่องนึ่งฆ่าเชื้อ
1. ผู้ใช้เลือกประเภทการบันทึก (ปกติ/ซ่อมบำรุง)
2. กรอกข้อมูลที่จำเป็น:
   - หมายเลขเครื่อง
   - วันที่-เวลา
   - ผู้ปฏิบัติงาน
   - ผลการตรวจสอบ
3. อัปโหลดรูปภาพ (ถ้ามี)
4. บันทึกลง Firestore

# การตรวจสอบข้อมูล
1. ระบบแสดงรายการบันทึกย้อนหลัง
2. สามารถกรองข้อมูลตาม:
   - วันที่
   - หมายเลขเครื่อง
   - ผู้ปฏิบัติงาน
   - สถานะ

 3. สถาปัตยกรรม (Architecture)
- **Frontend & Backend**: Next.js (Full-stack Framework)
- **Database & Authentication**: Firebase (Firestore, Authentication, Storage)
- **Hosting**: Vercel (สำหรับ Next.js) + Firebase Hosting (ถ้ามี)
- **State Management**: React Context API
- **API Routes**: ใช้ Next.js API Routes สำหรับการสร้าง API endpoints
- **Serverless Functions**: ใช้ Vercel Serverless Functions หรือ Firebase Cloud Functions


5. การจัดการ State
- ใช้ React Context สำหรับ state ระดับแอป
- ใช้ Local State สำหรับ component ที่ไม่ต้องแชร์ข้อมูล
- ใช้ Firestore real-time updates สำหรับข้อมูลแบบ real-time
 6. การจัดการรูปภาพ
- อัปโหลดไปยัง Firebase Storage
- บันทึก URL ลงใน Firestore
- ใช้ lazy loading สำหรับการโหลดรูปภาพ

 7. Security Rules
- กำหนดสิทธิ์การเข้าถึงข้อมูลใน Firestore
- ตรวจสอบสิทธิ์ผู้ใช้ก่อนการเข้าถึงข้อมูล
- จำกัดขนาดไฟล์ที่อัปโหลด
- add คนโดยเพิ่ม provider email รหัสพักงาน@gmail.com  / รหัสพนักงาน  
และเพิ่ม document ที่ collection users  -->  email:   fullName:  role: 

 8. การจัดการข้อผิดพลาด (Error Handling)
- แจ้งเตือนเมื่อบันทึกสำเร็จ/ล้มเหลว
- แสดงข้อความผิดพลาดที่เข้าใจง่าย
- บันทึก log ข้อผิดพลาด




